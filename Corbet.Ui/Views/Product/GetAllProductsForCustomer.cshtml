@model IEnumerable<Corbet.Ui.Models.Product>

@{
    Layout = "~/Views/Shared/_LayoutCustomer.cshtml";
    ViewData["Title"] = "GetAllProductsForCustomer";
}
<!-- Bootstrap CSS -->
    <link rel="stylesheet" href="~/assets/vendor/bootstrap/css/bootstrap.min.css">

<style>
    .hide {
        display: none;
    }
</style>

<h1 class="mt-5 pt-5 text-center">Products</h1>
<input id="searchbar" class="form-control mx-auto mb-3 text-center" style="width:40vw;" type="text"
       name="search" placeholder="Search Products Here..">


<div class="d-flex flex-wrap justify-content-center">
    @foreach (var item in Model)
    {
        <div class="card col-lg-3 col-md-5 col-sm-10 m-2" data-role="product" data-productName="@item.ProductName">
            <img class="card-img-top mt-3" src="~/Images/ProductImages/@item.ImagePath" style="height: 200px;" alt="Product Image">
            <div class="card-body">
                <h4 class="card-title fs-5 pl-2 col-lg-12 col-md-12 products">@item.ProductName</h4>
                <div class="row">
                    <div class="col-lg-5 col-md-5 ml-3"><b>@Html.DisplayNameFor(model => model.ProductCategory)</b></div>
                    <div class="col-lg-5 col-md-7">@item.ProductCategory</div>
                </div>
                <div class="row">
                    <div class="col-lg-5 col-md-5 ml-3"><b>@Html.DisplayNameFor(model => model.ProductSubCategory)</b></div>
                    <div class="col-lg-5 col-md-7">@item.ProductSubCategory</div>
                </div>
                <div class="row">
                    <div class="col-lg-5 col-md-5 ml-3"><b>@Html.DisplayNameFor(model => model.Price)</b></div>
                    <div class="col-lg-5 col-md-7">@item.Price</div>
                </div>
                <div class="text-center mt-3 mb-2"><a class="btn btn-sm btn-primary">Add To Cart</a></div>
            </div>
        </div>
    }
</div>

<script src="~/assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="~/lib/jquery/dist/jquery.min.js"></script>

<script>
    $(document).ready(function() {
        $("#searchbar").on("input", function(event) {
            const searchString = event.target.value;
            console.log(searchString)
            const productcards = document.querySelectorAll("[data-productname]");
            console.log(productcards)
            productcards.forEach(v => {
                v.classList.add("hide");
            })
            const filteredCards = [...productcards].filter((v) => v.getAttribute("data-productname").toLowerCase().includes(searchString))
            console.log(filteredCards)
            filteredCards.forEach(v => {
                v.classList.remove("hide");
            })
        });
    });
</script>
